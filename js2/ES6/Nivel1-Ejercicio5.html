<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
// Reemplaça en el següent bloc de codi la promesa per aync/await:


// function b() {
//    // ...
// }
// funtion a() {
//    b().then() = > {
//    doMoreWork();
//     }
// }


// const names=[];
// const introName=(nameFunction) => { 
//     names.push("Emilio")
// }
// async function b() {
//     let a = new Promise( (resolve, reject) => {
//         setTimeout( () => {
//             names.push("Pedro");
//             resolve("Name written")
//             reject("Pendiente")
//         }, 6000)
//     })
    
//     let result = await b;
    
//     console.log(result);
//     console.log(names.length);
// }

const PENDING= 0;
const FULFILLED=1;
const REJECTED =2;

function CustomPromise(executor){
    let state= PENDING;
    let value = null;
    let handlers=[];
    let catches=[];

    function resolve (result){
        if (state!== PENDING) return;

        state =FULFILLED;
        value= result;

        handlers.forEach((h)=>(value));

    }

    function reject(err){
        if (state !== PENDING)return;

        state= REJECTED;
        value=err;

        catches.forEach((c)=> c(err));
    }
    this.then = function(callback){
        if (state ===FULFILLED){
            callback(value);
        }else{
            handlers.push(callback);
        }
    }
    executor(resolve, reject);
}



// const doWork = (resolve,reject)=>{

//     setTimeout(()=>{ resolve ("Hello World")},1000); 
    
// }    
//     let someText = new Promise(doWork);

//     someText.then((val)=>{
//         console.log("1st log:" + val);
//     });

    
//     someText.then((val)=>{
//         console.log("2nd log:" + val);
//     });

//     setTimeout(()=>{
//         someText.then((val)=>{
//         console.log("3rd log:" + val);
//     });


//     },3000);

const doWork = (resolve,reject)=>{
    setTimeout(()=>{ resolve ("Hello World")},1000); 
}; 


const doOtherWork = (resolve,reject)=>{
    setTimeout(()=>{ resolve ("How are you?")},3000); 

};


// let someText = new Promise(doWork);

// someText
// .then((val)=>{
//         console.log("1nd log: " + val);
//         return new Promise(doOtherWork);
//     })

// .then((val)=>{

//     console.log(val);
// });


async function doAllTheWork(){

    // const someText =new Promise(doWork);
    // const text1 = await someText;
    const text1 = await getData();
    console.log (text1);

    // const otherText = new Promise(doOtherWork);
    // const text2= await otherText;
    // console.log(text2);
}

doAllTheWork();
console.log("Done");


    </script>
</body>
</html>